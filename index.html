<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SAO: Text Adventure (Demo)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Mobile-optimized game container -->
  <div id="game-container">
    <!-- Top: Scrollable Adventure Log -->
    <div id="adventure-log">
      <header>
        <h1>SAO ‚Äî Text Adventure</h1>
      </header>
      
      <!-- Player Status (compact for mobile) -->
      <div id="status" class="card">
        <h2>Player Status</h2>
        <div id="player-name">Player</div>
        <div class="stat">Lv <span id="player-level">1</span> | HP <span id="player-hp">10</span>/<span id="player-maxhp">10</span></div>
        <div class="bar-wrap"><div class="bar-outer"><div id="hp-bar" class="bar-inner"></div></div></div>
        <div class="stat">XP <span id="player-xp">0</span>/<span id="player-nextxp">100</span> | Floor <span id="player-floor">1</span> | üí∞ <span id="player-gold">0</span>G</div>
        <div class="bar-wrap"><div class="bar-outer"><div id="xp-bar" class="bar-inner"></div></div></div>
        <details class="stat-details">
          <summary>Stats & Equipment</summary>
          <div class="stat">Atk: <span id="player-atk">2</span> | Def: <span id="player-def">1</span> | Dex: <span id="player-dex">1</span> | Luck: <span id="player-luck">0</span></div>
          <div class="stat">Archetype: <span id="player-archetype">None</span> <button id="btn-archetype" class="small-btn">Choose</button></div>
          <div id="equip-preview" class="equip-preview" style="display:none"></div>
          <div class="stat">Quests: <span id="quest-count">0</span> | Achievements: <span id="achievement-count">0</span>/<span id="achievement-total">30</span></div>
          <div class="stat">Points: <span id="player-points">0</span> | Tokens: <span id="player-tokens">0</span> | SP: <span id="player-skillpoints">0</span></div>
          <div class="stat">
            <button id="btn-skills" class="small-btn">Skills</button>
            <button id="btn-achievements" class="small-btn">Achievements</button>
            <button id="quick-heal" class="small-btn">Use Herb</button>
          </div>
        </details>
      </div>

      <!-- Quest Tracker (collapsible on mobile) -->
      <details id="quest-tracker-mobile" class="card">
        <summary><h2>Active Quests (<span id="quest-count-display">0</span>)</h2></summary>
        <div id="quest-tracker-list"></div>
      </details>

      <!-- Action Log -->
      <div id="log" class="card">
        <h2>Adventure Log</h2>
        <div id="log-entries" class="log-entries" role="log" aria-live="polite" aria-atomic="false"></div>
      </div>

      <!-- Inventory (collapsible) -->
      <details id="inventory-mobile" class="card">
        <summary><h2>Inventory</h2></summary>
        <div style="display:flex;align-items:center;gap:8px">
          <ul id="inventory-list" style="flex:1;margin:0;padding:0;list-style:none"></ul>
          <div id="inventory-badge" aria-hidden="true" class="new-badge" style="display:none">New</div>
        </div>
      </details>

      <!-- Quests List (collapsible) -->
      <details id="quests-mobile" class="card">
        <summary><h2>Quest Log</h2></summary>
        <ul id="quest-list"></ul>
        <div id="quest-progress-bars"></div>
      </details>
    </div>

    <!-- Bottom: Fixed Command Panel -->
    <div id="command-panel">
      <div class="actions" id="main-actions">
        <button id="btn-field">Explore Field</button>
        <button id="btn-dungeon">Explore Dungeon</button>
        <button id="btn-town">Town</button>
        <button id="btn-npc">NPCs</button>
      </div>
      
      <div class="actions" id="town-actions" style="display:none;">
        <button id="btn-blacksmith">Blacksmith</button>
        <button id="btn-market">Market</button>
        <button id="btn-storage">Storage</button>
        <button id="btn-quest-board">Quests</button>
        <button id="btn-field-return">Leave Town</button>
      </div>
      
      <div class="actions combat-actions" id="combat-actions" style="display:none;">
        <button id="btn-attack">Attack</button>
        <button id="btn-skill-combat">Skill</button>
        <button id="btn-use-item">Item</button>
        <button id="btn-defend">Defend</button>
        <button id="btn-flee">Flee</button>
      </div>

      <div class="command-footer">
        <button id="btn-rest" class="utility-btn">Rest</button>
        <button id="btn-save" class="utility-btn">Save</button>
        <button id="btn-load" class="utility-btn">Load</button>
        <label class="auto-explore-toggle">
          <input type="checkbox" id="auto-explore" /> Auto
        </label>
      </div>
    </div>
  </div>

  <!-- Achievement Popup -->
  <div id="achievement-popup" class="achievement-popup">
    <div class="achievement-icon">üèÜ</div>
    <div class="achievement-content">
      <div class="achievement-title">Achievement Unlocked!</div>
      <div class="achievement-name"></div>
      <div class="achievement-desc"></div>
      <div class="achievement-reward">+50 Gold</div>
    </div>
  </div>

  <!-- Combo Overlay -->
  <div id="combo-overlay" class="combo-overlay">
    <div class="combo-text"></div>
  </div>

  <!-- Modal for NPCs and dialogs -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-panel card" role="dialog" aria-modal="true">
      <div class="modal-header"><h3 id="modal-title"></h3></div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-actions" id="modal-actions"></div>
    </div>
  </div>

  <!-- Equipment panel (shows equipped items per slot) -->
  <template id="equipment-template">
    <div id="equipment" class="card">
      <h2>Equipment</h2>
      <div id="equipment-slots" class="equipment-slots">
        <!-- slot items rendered here -->
      </div>
      <div class="help">Equip items to increase ATK/DEF. Use the inventory to equip/unequip.</div>
    </div>
  </template>

  <script src="config.js"></script>
  <script src="npcs.js"></script>
  <script src="achievements.js"></script>
  <script src="inventory.js"></script>
  <script src="main.js"></script>
</body>
</html>